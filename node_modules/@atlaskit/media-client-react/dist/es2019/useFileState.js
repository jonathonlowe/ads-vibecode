import { useEffect } from 'react';
import { useMediaClient } from './MediaClientProvider';
import { useMediaStore } from './useMediaStore';
export function useFileState(id, options = {}) {
  const {
    collectionName,
    occurrenceKey,
    skipRemote = false,
    includeHashForDuplicateFiles
  } = options;
  const mediaClient = useMediaClient();
  const fileState = useMediaStore(state => state.files[id]);
  useEffect(() => {
    // No need to resubscribe if there is a fileState already
    if (!fileState && !skipRemote) {
      mediaClient.file.getFileState(id, {
        collectionName,
        occurrenceKey,
        includeHashForDuplicateFiles
      });
    }
  }, [id, mediaClient, collectionName, occurrenceKey, skipRemote, fileState, includeHashForDuplicateFiles]);
  return {
    fileState
  };
}