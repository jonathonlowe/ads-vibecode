"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFileState = useFileState;
var _react = require("react");
var _MediaClientProvider = require("./MediaClientProvider");
var _useMediaStore = require("./useMediaStore");
function useFileState(id) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var collectionName = options.collectionName,
    occurrenceKey = options.occurrenceKey,
    _options$skipRemote = options.skipRemote,
    skipRemote = _options$skipRemote === void 0 ? false : _options$skipRemote,
    includeHashForDuplicateFiles = options.includeHashForDuplicateFiles;
  var mediaClient = (0, _MediaClientProvider.useMediaClient)();
  var fileState = (0, _useMediaStore.useMediaStore)(function (state) {
    return state.files[id];
  });
  (0, _react.useEffect)(function () {
    // No need to resubscribe if there is a fileState already
    if (!fileState && !skipRemote) {
      mediaClient.file.getFileState(id, {
        collectionName: collectionName,
        occurrenceKey: occurrenceKey,
        includeHashForDuplicateFiles: includeHashForDuplicateFiles
      });
    }
  }, [id, mediaClient, collectionName, occurrenceKey, skipRemote, fileState, includeHashForDuplicateFiles]);
  return {
    fileState: fileState
  };
}