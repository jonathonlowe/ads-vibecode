"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.processError = void 0;
var _errors = require("../../errors");
var _mediaClient = require("@atlaskit/media-client");
// Declares the type of the returned error by PDFjs.

var isErrorWithStatus = function isErrorWithStatus(error) {
  return error instanceof Error && "status" in error && typeof error.status === 'number';
};
var processError = exports.processError = function processError(error) {
  if (isErrorWithStatus(error)) {
    var reason = (0, _mediaClient.createRequestErrorReason)(error.status);
    return new _errors.MediaViewerError('docviewer-fetch-pdf', new _mediaClient.RequestError(reason, {
      statusCode: error.status
    }));
  }
  return new _errors.MediaViewerError('docviewer-fetch-pdf',
  // TODO: sanitize the error message or remove it entirely
  // https://product-fabric.atlassian.net/browse/MEX-2456
  error instanceof Error ? error : undefined);
};