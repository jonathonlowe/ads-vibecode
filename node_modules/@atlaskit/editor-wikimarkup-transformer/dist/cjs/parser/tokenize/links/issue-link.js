"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.issueLinkResolver = issueLinkResolver;
var _issueKey = require("../issue-key");
function issueLinkResolver(link, schema, context) {
  var originalLinkText = link.originalLinkText,
    linkTitle = link.linkTitle,
    notLinkBody = link.notLinkBody;
  if (linkTitle === 'smart-card' || linkTitle === 'block-link' // TODO: Depricated should be removed in the next major release
  ) {
    return [schema.nodes.blockCard.createChecked({
      url: notLinkBody
    })];
  }
  if (linkTitle === 'smart-link') {
    return [schema.nodes.inlineCard.createChecked({
      url: notLinkBody
    })];
  }
  if (linkTitle === 'smart-embed') {
    return [schema.nodes.embedCard.createChecked({
      url: notLinkBody
    })];
  }
  var issue = (0, _issueKey.getIssue)(context, originalLinkText);
  if (issue) {
    return (0, _issueKey.buildInlineCard)(schema, issue);
  }
  return undefined;
}