"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fileLink = fileLink;
var _mediaGroup = _interopRequireDefault(require("../nodes/mediaGroup"));
// [^attachment.pdf]
// Ignored via go/ees005
// eslint-disable-next-line require-unicode-regexp
var FILE_LINK_REGEXP = /^\[\^([\(\)\w. -]+)\]/;
function fileLink(input, position, schema) {
  var match = input.substring(position).match(FILE_LINK_REGEXP);
  if (!match) {
    return fallback(input, position);
  }
  var node = (0, _mediaGroup.default)(schema, match[1]);
  return {
    type: 'pmnode',
    nodes: [node],
    length: match[0].length
  };
}
function fallback(input, position) {
  return {
    type: 'text',
    text: input.substr(position, 1),
    length: 1
  };
}