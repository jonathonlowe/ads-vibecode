"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.blockquote = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _quoteMacro = require("./quote-macro");
// bq. foobarbaz
// Ignored via go/ees005
// eslint-disable-next-line require-unicode-regexp
var BLOCKQUOTE_REGEXP = /^bq\.(.*)/;
var blockquote = exports.blockquote = function blockquote(_ref) {
  var input = _ref.input,
    position = _ref.position,
    schema = _ref.schema,
    context = _ref.context;
  var match = input.substring(position).match(BLOCKQUOTE_REGEXP);
  if (!match) {
    return fallback(input, position);
  }
  var _match = (0, _slicedToArray2.default)(match, 2),
    rawContent = _match[1];
  return (0, _quoteMacro.rawContentProcessor)('', rawContent, match[0].length, schema, context);
};
function fallback(input, position) {
  return {
    type: 'text',
    text: input.substr(position, 1),
    length: 1
  };
}