"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sanitiseJqlString = void 0;
var _escapeRegExp = _interopRequireDefault(require("lodash/escapeRegExp"));
// Derived from JQLLexer#VALID_UNQUOTED_CHARS
var CHARS_TO_QUOTE = new RegExp("[\\s".concat((0, _escapeRegExp.default)("\"'=!<>()~,[]|&{}*/%+^$#@?;"), "]"));

/**
 * Quote the provided JQL string (and escape any existing quotes) if the input string uses reserved characters.
 *
 * @param jqlString String to sanitise
 */
var sanitiseJqlString = exports.sanitiseJqlString = function sanitiseJqlString(jqlString) {
  if (CHARS_TO_QUOTE.test(jqlString)) {
    return "\"".concat(jqlString.replace(/"/g, '\\"'), "\"");
  }
  return jqlString;
};