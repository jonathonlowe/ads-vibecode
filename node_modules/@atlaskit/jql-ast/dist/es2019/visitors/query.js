import _defineProperty from "@babel/runtime/helpers/defineProperty";
import { internalCreators } from '../creators';
import { getPositionFromContext, JastBuildingVisitor } from './common';
import { OrderByVisitor } from './order-by';
import { WhereVisitor } from './where';
export class QueryVisitor extends JastBuildingVisitor {
  constructor(...args) {
    super(...args);
    _defineProperty(this, "whereVisitor", new WhereVisitor(this.tokens));
    _defineProperty(this, "orderByVisitor", new OrderByVisitor(this.tokens));
    _defineProperty(this, "visitJqlQuery", ctx => {
      const whereContext = ctx.jqlWhere();
      const orderByContext = ctx.jqlOrderBy();
      return internalCreators.query(whereContext && whereContext.accept(this.whereVisitor), orderByContext && orderByContext.accept(this.orderByVisitor), getPositionFromContext(ctx));
    });
  }
}