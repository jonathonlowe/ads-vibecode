import { useCallback, useEffect } from 'react';
import { useProductPermissionsStore } from '../../product-permission/main';
export const useProductPermissions = ({
  userId,
  cloudId,
  permissionIds
}, {
  enabled
} = {
  enabled: true
}) => {
  const [state, {
    getPermissions
  }] = useProductPermissionsStore();
  const fetchData = useCallback(async () => {
    getPermissions({
      cloudId,
      userId,
      enabled,
      permissionIds: permissionIds || ['manage', 'write']
    });
  }, [cloudId, enabled, getPermissions, userId, permissionIds]);
  useEffect(() => {
    fetchData();
  }, [fetchData]);
  return {
    loading: state.isLoading,
    data: state.permissions,
    error: state.error
  };
};