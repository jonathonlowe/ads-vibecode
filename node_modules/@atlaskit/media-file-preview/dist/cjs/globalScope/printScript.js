"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.printScript = exports.printFunctionCall = void 0;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _platformFeatureFlags = require("@atlaskit/platform-feature-flags");
var printParam = function printParam(param) {
  if (typeof param === 'string') {
    return "'".concat(param, "'");
  } else if ((0, _typeof2.default)(param) === 'object') {
    return JSON.stringify(param);
  } else if (param === undefined) {
    return 'undefined';
  }
  return param;
};
var printParams = function printParams(args) {
  return args.map(function (arg) {
    return printParam(arg);
  }).join(',');
};
var printFunctionCall = exports.printFunctionCall = function printFunctionCall(fn) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  return "(".concat(fn.toString(), ")(").concat(printParams(args), ");");
};

// Removing the script tag after execution to prevent hydration
// mismatch issues after SSR. We don't want to render different
// HTML on the client and server https://react.dev/reference/react-dom/client/hydrateRoot
var printScript = exports.printScript = function printScript(statements) {
  return (0, _platformFeatureFlags.fg)('platform_remove_media_script_after_execution') ? "(function(){\n \t\t\t ".concat(statements.join(';'), "\n  \t\t\tdocument.currentScript.remove();\n\t\t})();\n\t\t") : "(function(){\n   \t\t\t".concat(statements.join(';'), "\n \t\t})();");
};