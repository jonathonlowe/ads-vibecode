"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mediaFilePreviewCache = exports.getCacheKey = exports.CardPreviewCacheImpl = void 0;
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _objectURLCache = require("./objectURLCache");
// Dimensions are used to create a key.
// Cache is invalidated when different dimensions are provided.

var getCacheKey = exports.getCacheKey = function getCacheKey(id, mode) {
  var resizeMode = mode || 'crop';
  return [id, resizeMode].join('-');
};
var CardPreviewCacheImpl = exports.CardPreviewCacheImpl = /*#__PURE__*/(0, _createClass2.default)(function CardPreviewCacheImpl(previewCache) {
  var _this = this;
  (0, _classCallCheck2.default)(this, CardPreviewCacheImpl);
  (0, _defineProperty2.default)(this, "get", function (id, mode) {
    var cacheKey = getCacheKey(id, mode);
    return _this.previewCache.get(cacheKey);
  });
  (0, _defineProperty2.default)(this, "set", function (id, mode, cardPreview) {
    var cacheKey = getCacheKey(id, mode);
    _this.previewCache.set(cacheKey, cardPreview);
  });
  (0, _defineProperty2.default)(this, "remove", function (id, mode) {
    var cacheKey = getCacheKey(id, mode);
    _this.previewCache.remove(cacheKey);
  });
  (0, _defineProperty2.default)(this, "clear", function () {
    _this.previewCache.clear();
  });
  this.previewCache = previewCache;
});
var mediaFilePreviewCache = exports.mediaFilePreviewCache = new CardPreviewCacheImpl((0, _objectURLCache.createObjectURLCache)());