import { useCallback } from 'react';
import { useFilePreview } from './useFilePreview';
export var useMediaImage = function useMediaImage(_ref) {
  var identifier = _ref.identifier,
    resizeMode = _ref.resizeMode,
    dimensions = _ref.dimensions,
    ssr = _ref.ssr,
    mediaBlobUrlAttrs = _ref.mediaBlobUrlAttrs,
    traceContext = _ref.traceContext,
    skipRemote = _ref.skipRemote,
    allowAnimated = _ref.allowAnimated,
    upscale = _ref.upscale,
    maxAge = _ref.maxAge,
    onLoadCallback = _ref.onLoad,
    onErrorCallback = _ref.onError;
  var _useFilePreview = useFilePreview({
      identifier: identifier,
      resizeMode: resizeMode,
      dimensions: dimensions,
      ssr: ssr,
      mediaBlobUrlAttrs: mediaBlobUrlAttrs,
      traceContext: traceContext,
      skipRemote: skipRemote,
      allowAnimated: allowAnimated,
      upscale: upscale,
      maxAge: maxAge
    }),
    preview = _useFilePreview.preview,
    status = _useFilePreview.status,
    error = _useFilePreview.error,
    onImageError = _useFilePreview.onImageError,
    onImageLoad = _useFilePreview.onImageLoad,
    getSsrScriptProps = _useFilePreview.getSsrScriptProps;
  var onLoad = useCallback(function () {
    onLoadCallback && onLoadCallback();
    onImageLoad(preview);
  }, [onImageLoad, onLoadCallback, preview]);
  var onError = useCallback(function () {
    onErrorCallback && onErrorCallback();
    onImageError(preview);
  }, [onErrorCallback, onImageError, preview]);
  var getImgProps = useCallback(function () {
    return {
      src: preview === null || preview === void 0 ? void 0 : preview.dataURI,
      onLoad: onLoad,
      onError: onError,
      'data-test-file-id': identifier.id,
      'data-test-collection': identifier.collectionName,
      'data-test-preview-source': preview === null || preview === void 0 ? void 0 : preview.source
    };
  }, [identifier.collectionName, identifier.id, onError, onLoad, preview === null || preview === void 0 ? void 0 : preview.dataURI, preview === null || preview === void 0 ? void 0 : preview.source]);
  return {
    status: status,
    error: error,
    getImgProps: getImgProps,
    getSsrScriptProps: getSsrScriptProps
  };
};