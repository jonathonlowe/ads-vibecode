"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addColumnAt = void 0;
var _tableMap = require("../table-map");
var _addColumn = require("./add-column");
var _cloneTr = require("./clone-tr");
var _find = require("./find");
// Returns a new transaction that adds a new column at index `columnIndex`.
var addColumnAt = exports.addColumnAt = function addColumnAt(columnIndex) {
  return function (tr) {
    var table = (0, _find.findTable)(tr.selection);
    if (table) {
      var map = _tableMap.TableMap.get(table.node);
      if (columnIndex >= 0 && columnIndex <= map.width) {
        return (0, _cloneTr.cloneTr)((0, _addColumn.addColumn)(tr, {
          map: map,
          tableStart: table.start,
          table: table.node
        }, columnIndex));
      }
    }
    return tr;
  };
};