import { addColumn } from './add-column';
import { addRow } from './add-row';
import { selectedRect } from './selection-rect';
import { isInTable } from './tables';

// :: (EditorState, dispatch: ?(tr: Transaction)) → bool
// Add a table row before the selection.
export var addRowBefore = function addRowBefore(state, dispatch) {
  if (!isInTable(state)) {
    return false;
  }
  if (dispatch) {
    var rect = selectedRect(state);
    dispatch(addRow(state.tr, rect, rect.top));
  }
  return true;
};

// :: (EditorState, dispatch: ?(tr: Transaction)) → bool
// Add a table row after the selection.
export var addRowAfter = function addRowAfter(state, dispatch) {
  if (!isInTable(state)) {
    return false;
  }
  if (dispatch) {
    var rect = selectedRect(state);
    dispatch(addRow(state.tr, rect, rect.bottom));
  }
  return true;
};

// :: (EditorState, dispatch: ?(tr: Transaction)) → bool
// Command to add a column before the column with the selection.
export var addColumnBefore = function addColumnBefore(state, dispatch) {
  if (!isInTable(state)) {
    return false;
  }
  if (dispatch) {
    var rect = selectedRect(state);
    dispatch(addColumn(state.tr, rect, rect.left));
  }
  return true;
};

// :: (EditorState, dispatch: ?(tr: Transaction)) → bool
// Command to add a column after the column with the selection.
export var addColumnAfter = function addColumnAfter(state, dispatch) {
  if (!isInTable(state)) {
    return false;
  }
  if (dispatch) {
    var rect = selectedRect(state);
    dispatch(addColumn(state.tr, rect, rect.right));
  }
  return true;
};