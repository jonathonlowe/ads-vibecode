let globalImage = global.Image;
let isErrorInsteadOfLoad;
class MockImage extends global.Image {
  constructor() {
    super();
    window.setTimeout(() => this[isErrorInsteadOfLoad ? 'onerror' : 'onload']());
  }
}
export function enableMockGlobalImage(isError = false) {
  global.Image = MockImage;
  isErrorInsteadOfLoad = isError;
}
export function disableMockGlobalImage() {
  global.Image = globalImage;
}