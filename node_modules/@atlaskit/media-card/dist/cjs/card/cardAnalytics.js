"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fireOperationalEvent = exports.fireNonCriticalErrorEvent = exports.fireDownloadSucceededEvent = exports.fireDownloadFailedEvent = void 0;
var _analytics = require("../utils/analytics");
var _errors = require("../errors");
var fireOperationalEvent = exports.fireOperationalEvent = function fireOperationalEvent(createAnalyticsEvent, status, fileAttributes, performanceAttributes, ssrReliability) {
  var error = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : new _errors.MediaCardError('missing-error-data');
  var traceContext = arguments.length > 6 ? arguments[6] : undefined;
  var metadataTraceContext = arguments.length > 7 ? arguments[7] : undefined;
  var fireEvent = function fireEvent(payload) {
    return (0, _analytics.fireMediaCardEvent)(payload, createAnalyticsEvent);
  };
  switch (status) {
    case 'complete':
      fireEvent((0, _analytics.getRenderSucceededEventPayload)(fileAttributes, performanceAttributes, ssrReliability, traceContext, metadataTraceContext));
      break;
    case 'failed-processing':
      fireEvent((0, _analytics.getRenderFailedFileStatusPayload)(fileAttributes, performanceAttributes, ssrReliability, traceContext, metadataTraceContext));
      break;
    case 'error':
      fireEvent((0, _analytics.getRenderErrorEventPayload)(fileAttributes, performanceAttributes, error, ssrReliability, traceContext, metadataTraceContext));
      break;
  }
};
var fireNonCriticalErrorEvent = exports.fireNonCriticalErrorEvent = function fireNonCriticalErrorEvent(createAnalyticsEvent, cardStatus, fileAttributes, ssrReliability) {
  var error = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new _errors.MediaCardError('missing-error-data');
  var traceContext = arguments.length > 5 ? arguments[5] : undefined;
  var metadataTraceContext = arguments.length > 6 ? arguments[6] : undefined;
  var errorPayload = (0, _analytics.getErrorEventPayload)(cardStatus, fileAttributes, error, ssrReliability, traceContext, metadataTraceContext);
  (0, _analytics.fireMediaCardEvent)(errorPayload, createAnalyticsEvent);
};
var fireDownloadSucceededEvent = exports.fireDownloadSucceededEvent = function fireDownloadSucceededEvent(createAnalyticsEvent, fileAttributes, traceContext, metadataTraceContext) {
  var payload = (0, _analytics.getDownloadSucceededEventPayload)(fileAttributes, traceContext, metadataTraceContext);
  (0, _analytics.fireMediaCardEvent)(payload, createAnalyticsEvent);
};
var fireDownloadFailedEvent = exports.fireDownloadFailedEvent = function fireDownloadFailedEvent(createAnalyticsEvent, fileAttributes) {
  var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new _errors.MediaCardError('missing-error-data');
  var traceContext = arguments.length > 3 ? arguments[3] : undefined;
  var metadataTraceContext = arguments.length > 4 ? arguments[4] : undefined;
  var payload = (0, _analytics.getDownloadFailedEventPayload)(fileAttributes, error, traceContext, metadataTraceContext);
  (0, _analytics.fireMediaCardEvent)(payload, createAnalyticsEvent);
};