import { FabricChannel } from '@atlaskit/analytics-listeners/types';
import { AnalyticsQueue } from './analytics-queue';
export const editorAnalyticsChannel = FabricChannel.editor;
export const fireAnalyticsEvent = (createAnalyticsEvent, options) => ({
  payload,
  channel = editorAnalyticsChannel
}) => {
  if (!createAnalyticsEvent) {
    return;
  }
  if (options !== null && options !== void 0 && options.immediate) {
    var _createAnalyticsEvent;
    (_createAnalyticsEvent = createAnalyticsEvent(payload)) === null || _createAnalyticsEvent === void 0 ? void 0 : _createAnalyticsEvent.fire(channel);
    return;
  }
  const queue = AnalyticsQueue.get();
  queue.schedule(() => {
    var _createAnalyticsEvent2;
    return (_createAnalyticsEvent2 = createAnalyticsEvent(payload)) === null || _createAnalyticsEvent2 === void 0 ? void 0 : _createAnalyticsEvent2.fire(channel);
  });
};