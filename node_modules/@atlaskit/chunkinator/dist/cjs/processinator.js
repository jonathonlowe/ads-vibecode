"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.processinator = void 0;
var _bufferCount = require("rxjs/operators/bufferCount");
var _concatMap = require("rxjs/operators/concatMap");
var processinator = exports.processinator = function processinator(blobs$, options) {
  var process = function process(blobs) {
    if (options.processor) {
      return options.processor(blobs).then(function () {
        return blobs;
      });
    } else {
      return Promise.resolve(blobs);
    }
  };
  return blobs$.pipe((0, _bufferCount.bufferCount)(options.batchSize)).pipe((0, _concatMap.concatMap)(process));
};