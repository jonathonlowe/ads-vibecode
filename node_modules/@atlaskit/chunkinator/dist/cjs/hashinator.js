"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hashinator = exports.blobToHashedBlob = void 0;
var _utils = require("./utils");
var blobToHashedBlob = exports.blobToHashedBlob = function blobToHashedBlob(hasher) {
  return function (slicedBlob) {
    return hasher(slicedBlob.blob).then(function (hash) {
      return {
        blob: slicedBlob.blob,
        hash: "".concat(hash, "-").concat(slicedBlob.blob.size),
        partNumber: slicedBlob.partNumber
      };
    });
  };
};
var hashinator = exports.hashinator = function hashinator(blobs$, _ref) {
  var hasher = _ref.hasher,
    concurrency = _ref.concurrency;
  return (0, _utils.asyncMap)(blobToHashedBlob(hasher), concurrency)(blobs$);
};