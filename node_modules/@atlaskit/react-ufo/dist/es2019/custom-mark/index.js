import { useContext, useMemo } from 'react';
import UFOInteractionContext from '../interaction-context';
import { getInteractionId } from '../interaction-id-context';
import { addMark } from '../interaction-metrics';
import { withProfiling } from '../self-measurements';
export default function UFOCustomMark({
  name,
  timestamp
}) {
  const interactionContext = useContext(UFOInteractionContext);
  useMemo(() => {
    if (interactionContext != null) {
      interactionContext.addMark(name, timestamp);
    }
  }, [interactionContext, name, timestamp]);
  return null;
}
export function UFOCustomMarks({
  data
}) {
  const interactionContext = useContext(UFOInteractionContext);
  useMemo(() => {
    if (interactionContext != null && data != null) {
      Object.keys(data).forEach(i => {
        interactionContext.addMark(i, data[i]);
      });
    }
  }, [data, interactionContext]);
  return null;
}
export const addUFOCustomMark = withProfiling(function addUFOCustomMark(name, timestamp) {
  const interactionId = getInteractionId();
  const currentInteractionId = interactionId.current;
  if (!currentInteractionId) {
    return;
  }
  const time = timestamp || performance.now();
  addMark(currentInteractionId, 'custom', name, [], time);
});