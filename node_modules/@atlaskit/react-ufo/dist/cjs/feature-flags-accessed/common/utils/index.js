"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shouldRedactValue = exports.redactValue = void 0;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _selfMeasurements = require("../../../self-measurements");
var _constants = require("../constants");
var startsAsObject = (0, _selfMeasurements.withProfiling)(function startsAsObject(value) {
  try {
    if (value.charAt(0) === '{') {
      return true;
    }
  } catch (e) {
    return false;
  }
  return false;
});
var isObject = (0, _selfMeasurements.withProfiling)(function isObject(value) {
  return value && (0, _typeof2.default)(value) === 'object' && value.constructor === Object;
});
var isString = (0, _selfMeasurements.withProfiling)(function isString(input) {
  var result;
  try {
    result = typeof input === 'string' || input instanceof String;
  } catch (err) {
    // swallow any errors
    result = false;
  }
  return result;
});
var shouldRedactValue = exports.shouldRedactValue = (0, _selfMeasurements.withProfiling)(function shouldRedactValue(value) {
  return isString(value) && startsAsObject(value) || isObject(value);
});
var redactValue = exports.redactValue = (0, _selfMeasurements.withProfiling)(function redactValue(featureFlagValue) {
  return shouldRedactValue(featureFlagValue) ? _constants.NON_BOOLEAN_VALUE : featureFlagValue;
});