"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _scheduler = require("scheduler");
var _platformFeatureFlags = require("@atlaskit/platform-feature-flags");
var _selfMeasurements = require("../self-measurements");
var scheduleIdleCallback = (0, _selfMeasurements.withProfiling)(function scheduleIdleCallback(work) {
  if (typeof window !== 'undefined' && typeof window.requestIdleCallback === 'function' &&
  // eslint-disable-next-line @atlaskit/platform/ensure-feature-flag-prefix
  (0, _platformFeatureFlags.fg)('ufo_payload_use_idle_callback')) {
    window.requestIdleCallback(work);
  } else {
    (0, _scheduler.unstable_scheduleCallback)(_scheduler.unstable_IdlePriority, work);
  }
});
var _default = exports.default = scheduleIdleCallback;