"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UFOCustomMarks = UFOCustomMarks;
exports.addUFOCustomMark = void 0;
exports.default = UFOCustomMark;
var _react = require("react");
var _interactionContext = _interopRequireDefault(require("../interaction-context"));
var _interactionIdContext = require("../interaction-id-context");
var _interactionMetrics = require("../interaction-metrics");
var _selfMeasurements = require("../self-measurements");
function UFOCustomMark(_ref) {
  var name = _ref.name,
    timestamp = _ref.timestamp;
  var interactionContext = (0, _react.useContext)(_interactionContext.default);
  (0, _react.useMemo)(function () {
    if (interactionContext != null) {
      interactionContext.addMark(name, timestamp);
    }
  }, [interactionContext, name, timestamp]);
  return null;
}
function UFOCustomMarks(_ref2) {
  var data = _ref2.data;
  var interactionContext = (0, _react.useContext)(_interactionContext.default);
  (0, _react.useMemo)(function () {
    if (interactionContext != null && data != null) {
      Object.keys(data).forEach(function (i) {
        interactionContext.addMark(i, data[i]);
      });
    }
  }, [data, interactionContext]);
  return null;
}
var addUFOCustomMark = exports.addUFOCustomMark = (0, _selfMeasurements.withProfiling)(function addUFOCustomMark(name, timestamp) {
  var interactionId = (0, _interactionIdContext.getInteractionId)();
  var currentInteractionId = interactionId.current;
  if (!currentInteractionId) {
    return;
  }
  var time = timestamp || performance.now();
  (0, _interactionMetrics.addMark)(currentInteractionId, 'custom', name, [], time);
});