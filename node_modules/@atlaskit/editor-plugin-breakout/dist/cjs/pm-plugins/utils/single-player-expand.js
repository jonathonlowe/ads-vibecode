"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.updateExpandedState = void 0;
var _expand = require("@atlaskit/editor-common/expand");
var _platformFeatureFlags = require("@atlaskit/platform-feature-flags");
var updateExpandedState = exports.updateExpandedState = function updateExpandedState(tr, node, isLivePage) {
  if (isLivePage || (0, _platformFeatureFlags.fg)('platform-editor-single-player-expand')) {
    var wasExpandExpanded = _expand.expandedState.get(node.node);
    var newExpand = tr.doc.nodeAt(node.pos);
    if (wasExpandExpanded !== undefined && newExpand) {
      _expand.expandedState.set(newExpand, wasExpandExpanded);
    }
  }
};