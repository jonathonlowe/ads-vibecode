"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _react = _interopRequireDefault(require("react"));
var _reactRenderImage = _interopRequireDefault(require("react-render-image"));
var _platformFeatureFlags = require("@atlaskit/platform-feature-flags");
var _loadingSkeleton = require("../loading-skeleton");
var ImageIcon = function ImageIcon(_ref) {
  var defaultIcon = _ref.defaultIcon,
    testId = _ref.testId,
    url = _ref.url,
    width = _ref.width,
    height = _ref.height,
    onError = _ref.onError,
    onLoad = _ref.onLoad;
  return /*#__PURE__*/_react.default.createElement(_reactRenderImage.default, (0, _extends2.default)({
    src: url
  }, (0, _platformFeatureFlags.fg)('platform-smart-card-icon-migration') ? {
    loading: /*#__PURE__*/_react.default.createElement(_loadingSkeleton.LoadingSkeletonNew, {
      testId: "".concat(testId, "-loading"),
      width: width,
      height: height
    }),
    loaded: /*#__PURE__*/_react.default.createElement("img", {
      src: url,
      "data-testid": "".concat(testId, "-image"),
      alt: "",
      style: {
        width: width,
        height: height
      }
    })
  } : {
    loading: /*#__PURE__*/_react.default.createElement(_loadingSkeleton.LoadingSkeletonOld, {
      testId: "".concat(testId, "-loading")
    }),
    loaded: /*#__PURE__*/_react.default.createElement("img", {
      src: url,
      "data-testid": "".concat(testId, "-image"),
      alt: ""
    })
  }, {
    errored: defaultIcon,
    onError: onError,
    onLoad: onLoad
  }));
};
var _default = exports.default = ImageIcon;