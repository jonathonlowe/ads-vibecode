"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shouldAllowInlineDropTarget = void 0;
var _utils = require("@atlaskit/editor-common/utils");
var _experiments = require("@atlaskit/tmp-editor-statsig/experiments");
var _checkMediaLayout = require("./check-media-layout");
var _consts = require("./consts");
var shouldAllowInlineDropTarget = exports.shouldAllowInlineDropTarget = function shouldAllowInlineDropTarget(isNested, node) {
  var isSameLayout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var activeNode = arguments.length > 3 ? arguments[3] : undefined;
  if ((0, _experiments.editorExperiment)('advanced_layouts', false) || isNested) {
    return false;
  }
  if ((0, _checkMediaLayout.isWrappedMedia)(node)) {
    return false;
  }
  if ((activeNode === null || activeNode === void 0 ? void 0 : activeNode.nodeType) === 'layoutSection') {
    return false;
  }
  if ((node === null || node === void 0 ? void 0 : node.type.name) === 'layoutSection') {
    return node.childCount < (0, _consts.maxLayoutColumnSupported)() || isSameLayout;
  }
  return !(0, _utils.isEmptyParagraph)(node);
};