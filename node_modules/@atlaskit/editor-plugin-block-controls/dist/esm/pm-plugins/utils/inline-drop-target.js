import { isEmptyParagraph } from '@atlaskit/editor-common/utils';
import { editorExperiment } from '@atlaskit/tmp-editor-statsig/experiments';
import { isWrappedMedia } from './check-media-layout';
import { maxLayoutColumnSupported } from './consts';
export var shouldAllowInlineDropTarget = function shouldAllowInlineDropTarget(isNested, node) {
  var isSameLayout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var activeNode = arguments.length > 3 ? arguments[3] : undefined;
  if (editorExperiment('advanced_layouts', false) || isNested) {
    return false;
  }
  if (isWrappedMedia(node)) {
    return false;
  }
  if ((activeNode === null || activeNode === void 0 ? void 0 : activeNode.nodeType) === 'layoutSection') {
    return false;
  }
  if ((node === null || node === void 0 ? void 0 : node.type.name) === 'layoutSection') {
    return node.childCount < maxLayoutColumnSupported() || isSameLayout;
  }
  return !isEmptyParagraph(node);
};