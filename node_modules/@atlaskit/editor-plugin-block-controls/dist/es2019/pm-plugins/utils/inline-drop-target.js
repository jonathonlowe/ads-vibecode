import { isEmptyParagraph } from '@atlaskit/editor-common/utils';
import { editorExperiment } from '@atlaskit/tmp-editor-statsig/experiments';
import { isWrappedMedia } from './check-media-layout';
import { maxLayoutColumnSupported } from './consts';
export const shouldAllowInlineDropTarget = (isNested, node,
/**
 * Is the active node in the same layout as the target node
 */
isSameLayout = false, activeNode) => {
  if (editorExperiment('advanced_layouts', false) || isNested) {
    return false;
  }
  if (isWrappedMedia(node)) {
    return false;
  }
  if ((activeNode === null || activeNode === void 0 ? void 0 : activeNode.nodeType) === 'layoutSection') {
    return false;
  }
  if ((node === null || node === void 0 ? void 0 : node.type.name) === 'layoutSection') {
    return node.childCount < maxLayoutColumnSupported() || isSameLayout;
  }
  return !isEmptyParagraph(node);
};