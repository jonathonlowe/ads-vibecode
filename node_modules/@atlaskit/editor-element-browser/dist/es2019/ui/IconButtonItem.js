import _extends from "@babel/runtime/helpers/extends";
import React, { forwardRef, memo, useMemo } from 'react';
import { ToolTipContent } from '@atlaskit/editor-common/keymaps';
import { Box, Pressable, Stack, Text, xcss } from '@atlaskit/primitives';
import Tooltip from '@atlaskit/tooltip';
import { IconRenderer } from './IconRenderer';
const WIDTH = '60px';
const largeButtonStyles = xcss({
  display: 'inline-flex',
  flexShrink: 0,
  boxSizing: 'border-box',
  position: 'relative',
  alignItems: 'baseline',
  justifyContent: 'center',
  textAlign: 'center',
  verticalAlign: 'middle',
  height: `${WIDTH}`,
  // The width and height of the button are the same for it to appear as square
  width: `${WIDTH}`,
  borderRadius: 'border.radius.100',
  borderWidth: 'border.width.0',
  font: 'font.body',
  fontWeight: 'font.weight.medium',
  transition: 'opacity 0.3s, background 0.1s ease-out',
  backgroundColor: 'color.background.neutral.subtle',
  color: 'color.text.subtle',
  '::after': {
    position: 'absolute',
    inset: 'space.0',
    content: '""',
    borderRadius: 'inherit',
    borderStyle: 'solid',
    borderWidth: 'border.width',
    borderColor: 'color.border',
    pointerEvents: 'none'
  },
  ':hover': {
    backgroundColor: 'color.background.neutral.subtle.hovered',
    color: 'color.text.subtle'
  },
  ':active': {
    backgroundColor: 'color.background.neutral.subtle.pressed',
    color: 'color.text.subtle'
  }
});
const selectedButtonStyles = xcss({
  backgroundColor: 'color.background.selected',
  color: 'color.text.selected',
  '::after': {
    content: '""',
    borderColor: 'color.border.selected'
  },
  ':visited': {
    color: 'color.text.selected'
  },
  ':hover': {
    color: 'color.text.selected',
    backgroundColor: 'color.background.selected.hovered'
  },
  ':active': {
    color: 'color.text.selected',
    backgroundColor: 'color.background.selected.pressed'
  }
});
const disabledButtonStyles = xcss({
  cursor: 'not-allowed',
  backgroundColor: 'color.background.disabled',
  color: 'color.text.disabled',
  ':hover': {
    backgroundColor: 'color.background.disabled',
    color: 'color.text.disabled'
  },
  ':active': {
    backgroundColor: 'color.background.disabled',
    color: 'color.text.disabled'
  },
  '::after': {
    content: 'none'
  }
});
const iconStyles = xcss({
  display: 'flex',
  flexGrow: 0,
  flexShrink: 0,
  alignSelf: 'center',
  userSelect: 'none'
});
const textStyles = xcss({
  width: `${WIDTH}`
});
const LargeIconButtonWithRef = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(({
  icon,
  isSelected,
  isDisabled,
  onClick,
  ...rest
}, ref) => {
  return /*#__PURE__*/React.createElement(Pressable
  // eslint-disable-next-line react/jsx-props-no-spreading
  , _extends({}, rest, {
    ref: ref,
    type: "button",
    isDisabled: isDisabled,
    onClick: onClick,
    xcss: [largeButtonStyles, isSelected && selectedButtonStyles, isDisabled && disabledButtonStyles]
  }), /*#__PURE__*/React.createElement(Box, {
    as: "span",
    xcss: iconStyles
  }, icon));
}));
export const IconButtonItem = /*#__PURE__*/memo(({
  index,
  title,
  keyshortcut,
  isSelected,
  isDisabled,
  renderIcon,
  onItemSelected
}) => {
  const iconComponent = useMemo(() => {
    if (!renderIcon) {
      return null;
    }
    return /*#__PURE__*/React.createElement(IconRenderer, null, renderIcon());
  }, [renderIcon]);
  return /*#__PURE__*/React.createElement(Tooltip, {
    content: /*#__PURE__*/React.createElement(ToolTipContent, {
      description: title,
      keymap: keyshortcut
    }),
    position: "top",
    ignoreTooltipPointerEvents: true
  }, tooltipProps => /*#__PURE__*/React.createElement(Stack, {
    alignInline: "center",
    space: "space.050"
  }, /*#__PURE__*/React.createElement(LargeIconButtonWithRef
  // eslint-disable-next-line react/jsx-props-no-spreading
  , _extends({}, tooltipProps, {
    icon: iconComponent,
    isSelected: isSelected,
    isDisabled: isDisabled,
    onClick: () => onItemSelected === null || onItemSelected === void 0 ? void 0 : onItemSelected(index)
  })), /*#__PURE__*/React.createElement(Box, {
    xcss: textStyles
  }, /*#__PURE__*/React.createElement(Text, {
    align: "center",
    maxLines: 1,
    color: isDisabled ? 'color.text.disabled' : isSelected ? 'color.text.selected' : 'color.text.subtle',
    size: "small"
  }, title))));
});