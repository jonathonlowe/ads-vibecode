import { PureComponent } from 'react';
export class WithProviders extends PureComponent {
    constructor(props) {
        super(props);
        this.handleProvider = (name, provider) => {
            this.setState(({ providers }) => {
                return {
                    providers: {
                        ...providers,
                        [name]: provider,
                    },
                };
            });
        };
        const providers = {};
        this.props.providers.forEach(name => {
            providers[name] = undefined;
        });
        this.state = {
            providers,
        };
    }
    UNSAFE_componentWillMount() {
        const { providers, providerFactory } = this.props;
        providers.forEach(name => {
            providerFactory.subscribe(name, this.handleProvider);
        });
    }
    componentWillUnmount() {
        const { providers, providerFactory } = this.props;
        providers.forEach(name => {
            providerFactory.unsubscribe(name, this.handleProvider);
        });
    }
    render() {
        const { state, props } = this;
        const { renderNode } = props;
        return renderNode(state.providers);
    }
}
WithProviders.displayName = 'WithProviders';
//# sourceMappingURL=with-providers.js.map