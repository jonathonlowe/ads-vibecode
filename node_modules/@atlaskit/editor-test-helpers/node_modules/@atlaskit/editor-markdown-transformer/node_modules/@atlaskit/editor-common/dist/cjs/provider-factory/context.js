"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var react_1 = tslib_1.__importDefault(require("react"));
var provider_factory_1 = tslib_1.__importDefault(require("./provider-factory"));
var ProviderFactoryContext = react_1.default.createContext(new provider_factory_1.default());
exports.ProviderFactoryProvider = ProviderFactoryContext.Provider;
exports.useProviderFactory = function () {
    return react_1.default.useContext(ProviderFactoryContext);
};
exports.useProvider = function (name) {
    var _a = tslib_1.__read(react_1.default.useState(), 2), provider = _a[0], setProvider = _a[1];
    var providerFactory = exports.useProviderFactory();
    react_1.default.useEffect(function () {
        var providerHandler = function (_, provider) {
            setProvider(provider);
        };
        providerFactory.subscribe(name, providerHandler);
        return function () {
            providerFactory.unsubscribe(name, providerHandler);
        };
    }, [name, providerFactory]);
    return provider;
};
//# sourceMappingURL=context.js.map