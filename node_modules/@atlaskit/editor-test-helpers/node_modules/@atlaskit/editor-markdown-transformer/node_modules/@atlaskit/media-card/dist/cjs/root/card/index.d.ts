import React, { Component } from 'react';
import { UIAnalyticsEvent, WithAnalyticsEventsProps } from '@atlaskit/analytics-next';
import { FileDetails, FileIdentifier, MediaClient } from '@atlaskit/media-client';
import { Subscription } from 'rxjs/Subscription';
import { CardAction, CardDimensions, CardProps, CardState, CardStatus } from '../..';
import { CardViewBase } from '../cardView';
import { InlinePlayerBase } from '../inlinePlayer';
import { AnalyticsErrorStateAttributes, AnalyticsLoadingAction } from '../../utils/analytics';
export declare type CardWithAnalyticsEventsProps = CardProps & WithAnalyticsEventsProps;
export declare class CardBase extends Component<CardWithAnalyticsEventsProps, CardState> {
    private hasBeenMounted;
    private lastAction?;
    private lastErrorState?;
    private lastFileState?;
    private lastCardStatusUpdateTimestamp?;
    cardRef: React.RefObject<CardViewBase | InlinePlayerBase>;
    subscription?: Subscription;
    static defaultProps: Partial<CardProps>;
    state: CardState;
    onCopyListener: () => void;
    componentDidMount(): void;
    componentDidUpdate(prevProps: CardProps, prevState: CardState): void;
    static getDerivedStateFromProps: (props: CardProps) => {
        status: string;
        dataURI: string;
        metadata: {
            id: "external-image";
            name: string;
            mediaType: string;
        };
    } | null;
    shouldRefetchImage: (current?: CardDimensions | undefined, next?: CardDimensions | undefined) => boolean;
    componentWillUnmount(): void;
    getId(): string;
    updateStateForIdentifier(): void;
    private getRequestedDimensions;
    private addContextToDataURI;
    private getObjectUrlFromBackendImageBlob;
    subscribeInternalFile(identifier: FileIdentifier, mediaClient: MediaClient): void;
    shouldFireLoadingStatusAnalyticsEvent: (action: AnalyticsLoadingAction, errorState: AnalyticsErrorStateAttributes) => boolean;
    fireLoadingStatusAnalyticsEvent: ({ id, status, metadata, error, }: {
        id: string;
        status: CardStatus;
        metadata?: FileDetails | undefined;
        error?: Error | undefined;
    }) => void;
    fireCardCommencedAnalytics(): void;
    fireFileCopiedAnalytics: () => void;
    private safeSetState;
    unsubscribe: () => void;
    private onRetry;
    readonly actions: CardAction[];
    onCardViewClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent>, analyticsEvent?: UIAnalyticsEvent | undefined) => void;
    onInlinePlayerError: () => void;
    renderInlinePlayer: () => JSX.Element;
    onMediaViewerClose: () => void;
    private onDisplayImage;
    renderMediaViewer: () => React.ReactPortal | undefined;
    renderCard: () => JSX.Element;
    renderContent(): JSX.Element;
    render(): JSX.Element;
    onCardInViewport: () => void;
    onClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent>, analyticsEvent?: UIAnalyticsEvent | undefined) => void;
    onMouseEnter: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;
}
export declare const Card: React.ComponentType<CardWithAnalyticsEventsProps>;
