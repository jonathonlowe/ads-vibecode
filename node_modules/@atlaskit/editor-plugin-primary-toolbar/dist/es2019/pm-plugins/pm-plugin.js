import { SafePlugin } from '@atlaskit/editor-common/safe-plugin';
import { PluginKey } from '@atlaskit/editor-prosemirror/state';
import { getToolbarComponents } from './toolbar-configuration';
export const primaryToolbarPluginKey = new PluginKey('primaryToolbar');
export const createPlugin = ({
  componentRegistry,
  contextualFormattingEnabled
}) => {
  return new SafePlugin({
    key: primaryToolbarPluginKey,
    state: {
      init: (_config, editorState) => ({
        components: getToolbarComponents({
          componentRegistry,
          editorState,
          contextualFormattingEnabled
        })
      }),
      apply: (_tr, pluginState) => pluginState
    }
  });
};