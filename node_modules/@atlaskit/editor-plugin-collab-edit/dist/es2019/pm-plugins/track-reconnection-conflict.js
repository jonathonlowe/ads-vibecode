import { SafePlugin } from '@atlaskit/editor-common/safe-plugin';
import { PluginKey } from '@atlaskit/editor-prosemirror/state';
export const trackLastRemoteConflictPluginKey = new PluginKey('trackLastRemoteConflict');
export const createPlugin = () => {
  return new SafePlugin({
    key: trackLastRemoteConflictPluginKey,
    state: {
      init() {
        return undefined;
      },
      apply(transaction, prevPluginState) {
        const metadata = transaction.getMeta(trackLastRemoteConflictPluginKey);
        if (metadata) {
          return metadata;
        }
        return prevPluginState;
      }
    }
  });
};