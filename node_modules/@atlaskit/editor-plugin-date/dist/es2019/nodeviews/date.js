import React from 'react';
import { useIntl } from 'react-intl-next';
import { Date } from '@atlaskit/date';
import { DateSharedCssClassName } from '@atlaskit/editor-common/styles';
import { setDatePickerAt } from '../pm-plugins/actions';
import { getDateInformation } from './utils';
export function DateNodeView(props) {
  var _props$getPos;
  const {
    timestamp
  } = props.node.attrs;
  const intl = useIntl();
  const pos = (_props$getPos = props.getPos) === null || _props$getPos === void 0 ? void 0 : _props$getPos.call(props);
  const {
    displayString,
    color
  } = getDateInformation(timestamp, intl, props.view.state, pos);
  return (
    /*#__PURE__*/
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-classname-prop, jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions -- Ignored via go/DSP-18766
    React.createElement("span", {
      className: DateSharedCssClassName.DATE_WRAPPER,
      onClick: handleClick
    }, /*#__PURE__*/React.createElement(Date, {
      color: color,
      value: timestamp
    }, displayString))
  );
  function handleClick(event) {
    event.nativeEvent.stopImmediatePropagation();
    const {
      state,
      dispatch
    } = props.view;
    setDatePickerAt(state.selection.from)(state, dispatch);
  }
}