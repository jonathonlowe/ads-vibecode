"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useMessages = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _constants = require("../../common/constants");
var useMessages = exports.useMessages = function useMessages(locale, loaderFn) {
  var _useState = (0, _react.useState)(_constants.DEFAULT_LOCALE_STATE),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    localeState = _useState2[0],
    setLocaleState = _useState2[1];
  (0, _react.useEffect)(function () {
    if (!localeState.messages || locale !== localeState.locale) {
      var current = true;
      loaderFn(locale).then(function (messages) {
        if (current) {
          setLocaleState({
            locale: locale,
            messages: messages !== null && messages !== void 0 ? messages : {}
          });
        }
      });
      return function () {
        current = false;
      };
    }
  }, [loaderFn, locale, localeState]);
  return localeState.messages;
};