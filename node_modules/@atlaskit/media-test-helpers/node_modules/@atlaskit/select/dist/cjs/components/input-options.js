"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
/** @jsx jsx */
var core_1 = require("@emotion/core");
var react_1 = require("react");
var radio_1 = tslib_1.__importDefault(require("@atlaskit/icon/glyph/radio"));
var checkbox_1 = tslib_1.__importDefault(require("@atlaskit/icon/glyph/checkbox"));
var components_1 = require("@atlaskit/theme/components");
var constants_1 = require("@atlaskit/theme/constants");
var colors = tslib_1.__importStar(require("@atlaskit/theme/colors"));
var getPrimitiveStyles = function (props) {
    var cx = props.cx, className = props.className, getStyles = props.getStyles, isDisabled = props.isDisabled, isFocused = props.isFocused, isSelected = props.isSelected;
    var styles = {
        alignItems: 'center',
        backgroundColor: isFocused ? colors.N30 : 'transparent',
        color: 'inherit',
        display: 'flex ',
        paddingBottom: 4,
        paddingLeft: constants_1.gridSize() * 2 + "px",
        paddingTop: 4,
        ':active': {
            backgroundColor: colors.B50,
        },
    };
    var augmentedStyles = tslib_1.__assign(tslib_1.__assign({}, getStyles('option', props)), styles);
    var bemClasses = {
        option: true,
        'option--is-disabled': isDisabled,
        'option--is-focused': isFocused,
        'option--is-selected': isSelected,
    };
    // maintain react-select API
    return [augmentedStyles, cx(null, bemClasses, className)];
};
// maintains function shape
var backgroundColor = components_1.themed({ light: colors.N40A, dark: colors.DN10 });
var transparent = components_1.themed({ light: 'transparent', dark: 'transparent' });
// the primary color represents the outer or background element
var getPrimaryColor = function (_a) {
    var isActive = _a.isActive, isDisabled = _a.isDisabled, isFocused = _a.isFocused, isSelected = _a.isSelected, rest = tslib_1.__rest(_a, ["isActive", "isDisabled", "isFocused", "isSelected"]);
    var color = backgroundColor;
    if (isDisabled && isSelected) {
        color = components_1.themed({ light: colors.B75, dark: colors.DN200 });
    }
    else if (isDisabled) {
        color = components_1.themed({ light: colors.N20A, dark: colors.DN10 });
    }
    else if (isActive) {
        color = components_1.themed({ light: colors.B75, dark: colors.B200 });
    }
    else if (isFocused && isSelected) {
        color = components_1.themed({ light: colors.B300, dark: colors.B75 });
    }
    else if (isFocused) {
        color = components_1.themed({ light: colors.N50A, dark: colors.DN30 });
    }
    else if (isSelected) {
        color = colors.blue;
    }
    return color(rest);
};
// the secondary color represents the radio dot or checkmark
var getSecondaryColor = function (_a) {
    var isActive = _a.isActive, isDisabled = _a.isDisabled, isSelected = _a.isSelected, rest = tslib_1.__rest(_a, ["isActive", "isDisabled", "isSelected"]);
    var color = components_1.themed({ light: colors.N0, dark: colors.DN10 });
    if (isDisabled && isSelected) {
        color = components_1.themed({ light: colors.N70, dark: colors.DN10 });
    }
    else if (isActive && isSelected && !isDisabled) {
        color = components_1.themed({ light: colors.B400, dark: colors.DN10 });
    }
    else if (!isSelected) {
        color = transparent;
    }
    return color(rest);
};
var ControlOption = /** @class */ (function (_super) {
    tslib_1.__extends(ControlOption, _super);
    function ControlOption() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = { isActive: false };
        _this.onMouseDown = function () { return _this.setState({ isActive: true }); };
        _this.onMouseUp = function () { return _this.setState({ isActive: false }); };
        _this.onMouseLeave = function () { return _this.setState({ isActive: false }); };
        return _this;
    }
    ControlOption.prototype.render = function () {
        var _a = this.props, getStyles = _a.getStyles, Icon = _a.Icon, children = _a.children, innerProps = _a.innerProps, innerRef = _a.innerRef, rest = tslib_1.__rest(_a, ["getStyles", "Icon", "children", "innerProps", "innerRef"]);
        // prop assignment
        var props = tslib_1.__assign(tslib_1.__assign({}, innerProps), { onMouseDown: this.onMouseDown, onMouseUp: this.onMouseUp, onMouseLeave: this.onMouseLeave });
        var _b = tslib_1.__read(getPrimitiveStyles(tslib_1.__assign({ getStyles: getStyles }, rest)), 2), styles = _b[0], classes = _b[1];
        return (core_1.jsx("div", tslib_1.__assign({ css: styles, className: classes, ref: innerRef }, props),
            core_1.jsx("div", { css: {
                    alignItems: 'center',
                    display: 'flex ',
                    flexShrink: 0,
                    paddingRight: '4px',
                } }, !!Icon ? (core_1.jsx(Icon, { label: "", primaryColor: getPrimaryColor(tslib_1.__assign(tslib_1.__assign({}, this.props), this.state)), secondaryColor: getSecondaryColor(tslib_1.__assign(tslib_1.__assign({}, this.props), this.state)) })) : null),
            core_1.jsx("div", { css: {
                    textOverflow: 'ellipsis',
                    overflowX: 'hidden',
                    flexGrow: 1,
                    whiteSpace: 'nowrap',
                } }, children)));
    };
    return ControlOption;
}(react_1.Component));
exports.CheckboxOption = function (props) { return (core_1.jsx(ControlOption, tslib_1.__assign({ Icon: checkbox_1.default }, props))); };
exports.RadioOption = function (props) { return (core_1.jsx(ControlOption, tslib_1.__assign({ Icon: radio_1.default }, props))); };
//# sourceMappingURL=input-options.js.map