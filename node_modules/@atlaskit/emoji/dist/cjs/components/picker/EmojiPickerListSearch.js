/* EmojiPickerListSearch.tsx generated by @compiled/babel-plugin v0.36.1 */
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.emojiPickerSearchTestId = exports.EmojiPickerListSearch = void 0;
require("./EmojiPickerListSearch.compiled.css");
var _runtime = require("@compiled/react/runtime");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _search = _interopRequireDefault(require("@atlaskit/icon/core/migration/search"));
var _textfield = _interopRequireDefault(require("@atlaskit/textfield"));
var _visuallyHidden = _interopRequireDefault(require("@atlaskit/visually-hidden"));
var _react = _interopRequireWildcard(require("react"));
var _reactIntlNext = require("react-intl-next");
var _useDebounce = require("use-debounce");
var _constants = require("../../util/constants");
var _i18n = require("../i18n");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
var input = null;
var pickerSearch = null;
var searchIcon = null;
var hidden = null;
var emojiPickerSearchTestId = exports.emojiPickerSearchTestId = 'emoji-picker-search';
var EmojiPickerListSearch = exports.EmojiPickerListSearch = function EmojiPickerListSearch(props) {
  var style = props.style,
    query = props.query,
    _props$isVisible = props.isVisible,
    isVisible = _props$isVisible === void 0 ? true : _props$isVisible,
    resultsCount = props.resultsCount,
    onChange = props.onChange;
  var textRef = (0, _react.useRef)(null);
  var _useState = (0, _react.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    dirty = _useState2[0],
    setDirty = _useState2[1];
  var _useIntl = (0, _reactIntlNext.useIntl)(),
    formatMessage = _useIntl.formatMessage;

  // Debounce callback
  var _useDebouncedCallback = (0, _useDebounce.useDebouncedCallback)(function (value) {
      onChange(value);
      setDirty(true);
    },
    // delay in ms
    _constants.EMOJI_SEARCH_DEBOUNCE),
    _useDebouncedCallback2 = (0, _slicedToArray2.default)(_useDebouncedCallback, 1),
    debouncedSearch = _useDebouncedCallback2[0];
  var handleOnChange = function handleOnChange(e) {
    debouncedSearch(e.target.value);
  };
  (0, _react.useLayoutEffect)(function () {
    requestAnimationFrame(function () {
      if (textRef) {
        var _textRef$current;
        (_textRef$current = textRef.current) === null || _textRef$current === void 0 || _textRef$current.focus();
      }
    });
  }, []);
  return /*#__PURE__*/_react.default.createElement("div", {
    style: style,
    className: (0, _runtime.ax)(["_vchhusvi _ca0qutpp _n3tdutpp _19bvutpp _u5f3utpp _1bsb1osq", !isVisible && "_tzy4idpf _3um015vq _1e0cglyw"])
  }, /*#__PURE__*/_react.default.createElement(_visuallyHidden.default, {
    id: "emoji-search-results-status",
    role: "status"
  }, dirty ? query === '' ? formatMessage(_i18n.messages.searchResultsStatusSeeAll) : formatMessage(_i18n.messages.searchResultsStatus, {
    count: resultsCount
  }) : null), /*#__PURE__*/_react.default.createElement(_textfield.default, {
    role: "searchbox",
    "aria-label": formatMessage(_i18n.messages.searchLabel),
    autoComplete: "off",
    name: "search",
    placeholder: "".concat(formatMessage(_i18n.messages.searchPlaceholder), "..."),
    defaultValue: query || '',
    onChange: handleOnChange,
    elemBeforeInput: /*#__PURE__*/_react.default.createElement("span", {
      className: (0, _runtime.ax)(["_tzy4105o _18u01i6y"])
    }, /*#__PURE__*/_react.default.createElement(_search.default, {
      LEGACY_margin: "0 0 0 2px",
      color: "currentColor",
      spacing: "spacious",
      label: ""
    })),
    testId: emojiPickerSearchTestId,
    ref: textRef,
    isCompact: true,
    className: (0, _runtime.ax)(["_11c82smr _12ji1r31 _1qu2glyw _12y31o36 _vchhusvi _syaz1kw7 _80om1kw7 _1q51t94y _y4tize3t _85i5v77o _bozg12x7 _1bsb1osq _13xeglyw _1goxglyw"])
  }));
};