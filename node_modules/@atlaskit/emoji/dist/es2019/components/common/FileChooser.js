import React, { useRef } from 'react';
import Button from '@atlaskit/button/new';
export const chooseFileButtonTestId = 'choose-file-button';
export const fileUploadInputTestId = 'file-upload';
const FileChooser = props => {
  const {
    accept,
    ariaDescribedBy,
    isDisabled,
    label,
    onChange,
    onClick
  } = props;
  const filePickerRef = useRef(null);
  const fileButtonRef = useRef(null);
  const handleOnChooseFile = () => {
    var _fileButtonRef$curren;
    if (!filePickerRef.current) {
      return;
    }
    if (onClick) {
      onClick();
    }
    filePickerRef.current.click();
    (_fileButtonRef$curren = fileButtonRef.current) === null || _fileButtonRef$curren === void 0 ? void 0 : _fileButtonRef$curren.focus();
  };
  return /*#__PURE__*/React.createElement("span", null, /*#__PURE__*/React.createElement(Button, {
    onClick: handleOnChooseFile,
    isDisabled: isDisabled,
    "aria-describedby": ariaDescribedBy,
    testId: chooseFileButtonTestId,
    ref: fileButtonRef
  }, label), /*#__PURE__*/React.createElement("input", {
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-classname-prop -- Ignored via go/DSP-18766
    className: "emojiUploadFileInput",
    ref: filePickerRef,
    onChange: onChange,
    type: "file",
    accept: accept
    // eslint-disable-next-line @atlaskit/ui-styling-standard/enforce-style-prop -- Ignored via go/DSP-18766
    ,
    style: {
      display: 'none'
    },
    "data-testid": fileUploadInputTestId
  }));
};
export default FileChooser;