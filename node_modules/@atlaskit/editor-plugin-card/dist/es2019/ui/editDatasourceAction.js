import { ACTION, ACTION_SUBJECT, ACTION_SUBJECT_ID, EVENT_TYPE } from '@atlaskit/editor-common/analytics';
import { getDatasourceType } from '@atlaskit/editor-common/utils';
import { showDatasourceModal } from '../pm-plugins/actions';
export const editDatasource = (datasourceId, editorAnalyticsApi, appearance, extensionKey) => (state, dispatch) => {
  const datasourceType = getDatasourceType(datasourceId);
  if (dispatch && datasourceType) {
    const {
      tr
    } = state;
    showDatasourceModal(datasourceType)(tr);
    editorAnalyticsApi === null || editorAnalyticsApi === void 0 ? void 0 : editorAnalyticsApi.attachAnalyticsEvent({
      action: ACTION.CLICKED,
      actionSubject: ACTION_SUBJECT.BUTTON,
      actionSubjectId: ACTION_SUBJECT_ID.EDIT_DATASOURCE,
      eventType: EVENT_TYPE.UI,
      attributes: {
        extensionKey,
        appearance
      }
    })(tr);
    dispatch(tr);
    return true;
  }
  return false;
};