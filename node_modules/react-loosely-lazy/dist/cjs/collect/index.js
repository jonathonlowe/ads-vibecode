"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.collect = void 0;
var _config = require("../config");
var _constants = require("../constants");
var _render = require("./render");
var _hydrate = require("./hydrate");
const collect = () => {
  const markers = document.querySelectorAll('input[data-lazy-begin]');
  const {
    mode
  } = (0, _config.getConfig)();
  for (let i = 0, j = markers.length; i < j; i += 1) {
    const el = markers[i];
    const {
      lazyBegin
    } = el.dataset || {};
    const value = mode === _config.MODE.RENDER ? (0, _render.cloneElements)(markers[i], lazyBegin) : (0, _hydrate.refElements)(markers[i], lazyBegin);
    if (_constants.COLLECTED.has(lazyBegin)) {
      _constants.COLLECTED.get(lazyBegin).push(value);
    } else {
      _constants.COLLECTED.set(lazyBegin, [value]);
    }
  }
};
exports.collect = collect;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwicmVxdWlyZSIsIl9jb25zdGFudHMiLCJfcmVuZGVyIiwiX2h5ZHJhdGUiLCJjb2xsZWN0IiwibWFya2VycyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGUiLCJnZXRDb25maWciLCJpIiwiaiIsImxlbmd0aCIsImVsIiwibGF6eUJlZ2luIiwiZGF0YXNldCIsInZhbHVlIiwiTU9ERSIsIlJFTkRFUiIsImNsb25lRWxlbWVudHMiLCJyZWZFbGVtZW50cyIsIkNPTExFQ1RFRCIsImhhcyIsImdldCIsInB1c2giLCJzZXQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbGxlY3QvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29uZmlnLCBNT0RFIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IENPTExFQ1RFRCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5cbmltcG9ydCB7IGNsb25lRWxlbWVudHMgfSBmcm9tICcuL3JlbmRlcic7XG5pbXBvcnQgeyByZWZFbGVtZW50cyB9IGZyb20gJy4vaHlkcmF0ZSc7XG5cbmV4cG9ydCBjb25zdCBjb2xsZWN0ID0gKCkgPT4ge1xuICBjb25zdCBtYXJrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAnaW5wdXRbZGF0YS1sYXp5LWJlZ2luXSdcbiAgKTtcbiAgY29uc3QgeyBtb2RlIH0gPSBnZXRDb25maWcoKTtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBtYXJrZXJzLmxlbmd0aDsgaSA8IGo7IGkgKz0gMSkge1xuICAgIGNvbnN0IGVsID0gbWFya2Vyc1tpXTtcbiAgICBjb25zdCB7IGxhenlCZWdpbiB9ID0gZWwuZGF0YXNldCB8fCB7fTtcbiAgICBjb25zdCB2YWx1ZSA9XG4gICAgICBtb2RlID09PSBNT0RFLlJFTkRFUlxuICAgICAgICA/IGNsb25lRWxlbWVudHMobWFya2Vyc1tpXSwgbGF6eUJlZ2luKVxuICAgICAgICA6IHJlZkVsZW1lbnRzKG1hcmtlcnNbaV0sIGxhenlCZWdpbik7XG5cbiAgICBpZiAoQ09MTEVDVEVELmhhcyhsYXp5QmVnaW4pKSB7XG4gICAgICBDT0xMRUNURUQuZ2V0KGxhenlCZWdpbikucHVzaCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIENPTExFQ1RFRC5zZXQobGF6eUJlZ2luLCBbdmFsdWVdKTtcbiAgICB9XG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUgsT0FBQTtBQUVPLE1BQU1JLE9BQU8sR0FBR0EsQ0FBQSxLQUFNO0VBQzNCLE1BQU1DLE9BQU8sR0FBR0MsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FDdkMsd0JBQ0YsQ0FBQztFQUNELE1BQU07SUFBRUM7RUFBSyxDQUFDLEdBQUcsSUFBQUMsaUJBQVMsRUFBQyxDQUFDO0VBQzVCLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUMsQ0FBQyxHQUFHTixPQUFPLENBQUNPLE1BQU0sRUFBRUYsQ0FBQyxHQUFHQyxDQUFDLEVBQUVELENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDakQsTUFBTUcsRUFBRSxHQUFHUixPQUFPLENBQUNLLENBQUMsQ0FBQztJQUNyQixNQUFNO01BQUVJO0lBQVUsQ0FBQyxHQUFHRCxFQUFFLENBQUNFLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDdEMsTUFBTUMsS0FBSyxHQUNUUixJQUFJLEtBQUtTLFlBQUksQ0FBQ0MsTUFBTSxHQUNoQixJQUFBQyxxQkFBYSxFQUFDZCxPQUFPLENBQUNLLENBQUMsQ0FBQyxFQUFFSSxTQUFTLENBQUMsR0FDcEMsSUFBQU0sb0JBQVcsRUFBQ2YsT0FBTyxDQUFDSyxDQUFDLENBQUMsRUFBRUksU0FBUyxDQUFDO0lBRXhDLElBQUlPLG9CQUFTLENBQUNDLEdBQUcsQ0FBQ1IsU0FBUyxDQUFDLEVBQUU7TUFDNUJPLG9CQUFTLENBQUNFLEdBQUcsQ0FBQ1QsU0FBUyxDQUFDLENBQUNVLElBQUksQ0FBQ1IsS0FBSyxDQUFDO0lBQ3RDLENBQUMsTUFBTTtNQUNMSyxvQkFBUyxDQUFDSSxHQUFHLENBQUNYLFNBQVMsRUFBRSxDQUFDRSxLQUFLLENBQUMsQ0FBQztJQUNuQztFQUNGO0FBQ0YsQ0FBQztBQUFDVSxPQUFBLENBQUF0QixPQUFBLEdBQUFBLE9BQUEiLCJpZ25vcmVMaXN0IjpbXX0=